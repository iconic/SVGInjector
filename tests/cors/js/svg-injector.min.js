/**
 * SVGInjector v1.1.3 - Fast, caching, dynamic inline SVG DOM injection library
 * https://github.com/iconic/SVGInjector
 *
 * Copyright (c) 2014-2015 Waybury <hello@waybury.com>
 * @license MIT
 */
!function(t,e){"use strict";function r(t){t=t.split(" ");for(var e={},r=t.length,n=[];r--;)e.hasOwnProperty(t[r])||(e[t[r]]=1,n.unshift(t[r]));return n.join(" ")}var n="file:"===t.location.protocol,i=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||e.createElementNS&&!!e.createElementNS(SVG.ns,"svg").createSVGRect,o=Array.prototype.forEach||function(t,e){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;var r,n=this.length>>>0;for(r=0;n>r;++r)r in this&&t.call(e,this[r],r,this)},a={},s={},l=0,c=[],u=[],f={},p=function(t){return t.cloneNode(!0)},d=function(t,e){u[t]=u[t]||[],u[t].push(e)},v=function(t){for(var e=0,r=u[t].length;r>e;e++)!function(e){setTimeout(function(){u[t][e](p(a[t]))},0)}(e)},g=function(e,r){if(void 0!==a[e])a[e]instanceof SVGSVGElement?r(p(a[e])):d(e,r);else{if(!t.XMLHttpRequest)return r("Browser does not support XMLHttpRequest"),!1;a[e]={},d(e,r);var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){if(404===i.status||null===i.responseXML)return r("Unable to load SVG file: "+e),n&&r("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),r(),!1;if(!(200===i.status||n&&0===i.status))return r("There was a problem injecting the SVG: "+i.status+" "+i.statusText),!1;if(i.responseXML instanceof Document)a[e]=i.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var t=h(i.responseText);t?a[e]=t:r("Unable to parse SVG file: "+e)}v(e)}},i.open("GET",e),i.overrideMimeType&&i.overrideMimeType("text/xml"),i.send()}},h=function(t){if(DOMParser&&DOMParser instanceof Function){var e;try{var r=new DOMParser;e=r.parseFromString(t,"text/xml")}catch(n){return}if(e&&!e.getElementsByTagName("parsererror").length)return e}},m=function(e,n,u,p){var d=e.getAttribute("data-src")||e.getAttribute("src");if(!(a[d]||!i&&s[d]||/\.svg/i.test(d)))return void p("Attempted to inject a file with a non-svg extension: "+d);if(!i){var v=e.getAttribute("data-fallback")||e.getAttribute("data-png")||s[d];return void(v?(e.setAttribute("src",v),p(null)):u?(e.setAttribute("src",u+"/"+d.split("/").pop().replace(".svg",".png")),p(null)):p("This browser does not support SVG and no PNG fallback was defined."))}-1===c.indexOf(e)&&(c.push(e),e.setAttribute("src",""),g(d,function(i){if("undefined"==typeof i||"string"==typeof i)return p(i),!1;var a=e.getAttribute("id");a&&i.setAttribute("id",a);var s=e.getAttribute("title");s&&i.setAttribute("title",s);var u=[].concat(i.getAttribute("class")||[],"injected-svg",e.getAttribute("class")||[]).join(" ");i.setAttribute("class",r(u));var v=e.getAttribute("style");v&&i.setAttribute("style",v);var g=[].filter.call(e.attributes,function(t){return/^data-\w[\w\-]*$/.test(t.name)});o.call(g,function(t){t.name&&t.value&&i.setAttribute(t.name,t.value)});var h,m,b,y,A,w={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],pattern:["fill","stroke"],radialGradient:["fill","stroke"]};Object.keys(w).forEach(function(t){h=t,b=w[t],m=i.querySelectorAll("defs "+h+"[id]");for(var e=0,r=m.length;r>e;e++){y=m[e].id,A=y+"-"+l;var n;o.call(b,function(t){n=i.querySelectorAll("["+t+'*="'+y+'"]');for(var e=0,r=n.length;r>e;e++)n[e].setAttribute(t,"url(#"+A+")")}),m[e].id=A}}),i.removeAttribute("xmlns:a");for(var S,x,G=i.querySelectorAll("script"),k=[],j=0,M=G.length;M>j;j++)x=G[j].getAttribute("type"),x&&"application/ecmascript"!==x&&"application/javascript"!==x||(S=G[j].innerText||G[j].textContent,k.push(S),i.removeChild(G[j]));if(k.length>0&&("always"===n||"once"===n&&!f[d])){for(var V=0,T=k.length;T>V;V++)new Function(k[V])(t);f[d]=!0}var E=i.querySelectorAll("style");o.call(E,function(t){t.textContent+=""}),e.parentNode.replaceChild(i,e),delete c[c.indexOf(e)],e=null,l++,p(i)}))},b=function(t,e,r){e=e||{};var n=e.evalScripts||"always",i=e.pngFallback||!1,a=e.each;if(void 0!==t.length){var s=0;o.call(t,function(e){m(e,n,i,function(e){a&&"function"==typeof a&&a(e),r&&t.length===++s&&r(s)})})}else t?m(t,n,i,function(e){a&&"function"==typeof a&&a(e),r&&r(1),t=null}):r&&r(0)};b.cacheSvg=function(t,e,r){return e&&i&&(e instanceof String&&(e=h(e)),e instanceof Document&&(e=e.firstChild),e instanceof SVGSVGElement)?(a[t]=e,!0):r&&!i?(s[t]=r,!0):!1},"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=b:"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof t&&(t.SVGInjector=b)}(window,document);
//# sourceMappingURL=svg-injector.map.js