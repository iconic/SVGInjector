"use strict";((a,b)=>{function c(a){a=a.split(" ");const b={};let c=a.length;const d=[];for(;c--;)b.hasOwnProperty(a[c])||(b[a[c]]=1,d.unshift(a[c]));return d.join(" ")}let{implementation:d}=b;const e="file:"==a.location.protocol,f=d.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),g=Array.prototype.forEach||function(a,b){if(null==this||null==this||"function"!=typeof a)throw new TypeError;let c;const d=this.length>>>0;for(c=0;c<d;++c)c in this&&a.call(b,this[c],c,this)},h={};let j=0;const k=[],l=[],m={},n=a=>a.cloneNode(!0),o=(a,b)=>{l[a]=l[a]||[],l[a].push(b)},p=a=>{for(let b=0,c=l[a].length;b<c;b++)(b=>{setTimeout(()=>{l[a][b](n(h[a]))},0)})(b)},q=(b,c)=>{if(a.SVGSVGElement)if(void 0!==h[b])h[b]instanceof SVGSVGElement?c(n(h[b])):o(b,c);else{if(!a.XMLHttpRequest)return c("Browser does not support XMLHttpRequest"),!1;h[b]={},o(b,c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(4==d.readyState){if(404==d.status||null==d.responseXML)return c(`Unable to load SVG file: ${b}`),e&&c("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),c(),!1;if(200==d.status||e&&0==d.status){if(d.responseXML instanceof Document)h[b]=d.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){let a;try{const b=new DOMParser;a=b.parseFromString(d.responseText,"text/xml")}catch(b){a=void 0}if(!a||a.getElementsByTagName("parsererror").length)return c(`Unable to parse SVG file: ${b}`),!1;h[b]=a.documentElement}p(b)}else return c(`There was a problem injecting the SVG: ${d.status} ${d.statusText}`),!1}},d.open("GET",b),d.overrideMimeType&&d.overrideMimeType("text/xml"),d.send()}},r=(b,d,e,h)=>{const i=b.getAttribute("data-src")||b.getAttribute("src");if(!/\.svg/i.test(i))return void h(`Attempted to inject a file with a non-svg extension: ${i}`);if(!f){const a=b.getAttribute("data-fallback")||b.getAttribute("data-png");return void(a?(b.setAttribute("src",a),h(null)):e?(b.setAttribute("src",`${e}/${i.split("/").pop().replace(".svg",".png")}`),h(null)):h("This browser does not support SVG and no PNG fallback was defined."))}k.includes(b)||(k.push(b),b.setAttribute("src",""),q(i,e=>{if("undefined"==typeof e||"string"==typeof e)return h(e),!1;const f=b.getAttribute("id");f&&e.setAttribute("id",f);const l=b.getAttribute("title");l&&e.setAttribute("title",l);const n=[].concat(e.getAttribute("class")||[],"injected-svg",b.getAttribute("class")||[]).join(" ");e.setAttribute("class",c(n));const o=b.getAttribute("style");o&&e.setAttribute("style",o);const p=[].filter.call(b.attributes,a=>{let{name:b}=a;return /^data-\w[\w\-]*$/.test(b)||"onclick".match(b)});g.call(p,a=>{let{name:b,value:c}=a;b&&c&&e.setAttribute(b,c)});const q={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],pattern:["fill","stroke"],radialGradient:["fill","stroke"]};let r,s,t,u,v;Object.keys(q).forEach(a=>{r=a,t=q[a],s=e.querySelectorAll(`defs ${r}[id]`);for(let b=0,c=s.length;b<c;b++){u=s[b].id,v=`${u}-${j}`;let a;g.call(t,b=>{a=e.querySelectorAll(`[${b}*="${u}"]`);for(let c=0,d=a.length;c<d;c++)a[c].setAttribute(b,`url(#${v})`)}),s[b].id=v}}),e.removeAttribute("xmlns:a");const w=e.querySelectorAll("script"),x=[];let y,z;for(let a=0,b=w.length;a<b;a++)z=w[a].getAttribute("type"),z&&"application/ecmascript"!=z&&"application/javascript"!=z||(y=w[a].innerText||w[a].textContent,x.push(y),e.removeChild(w[a]));if(0<x.length&&("always"==d||"once"==d&&!m[i])){for(let b=0,c=x.length;b<c;b++)new Function(x[b])(a);m[i]=!0}const A=e.querySelectorAll("style");g.call(A,a=>{a.textContent+=""}),b.parentNode.replaceChild(e,b),delete k[k.indexOf(b)],b=null,j++,h(e)}))},s=function(a){let b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=2<arguments.length?arguments[2]:void 0;const d=b.evalScripts||"always",e=b.pngFallback||!1,f=b.each;if(a&&a.length!==void 0){let b=0;g.call(a,g=>{r(g,d,e,d=>{f&&"function"==typeof f&&f(d),c&&a.length==++b&&c(b)})})}else a?r(a,d,e,b=>{f&&"function"==typeof f&&f(b),c&&c(1),a=null}):c&&c(0)};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=s:"function"==typeof define&&define.amd?define(()=>s):"object"==typeof a&&(a.SVGInjector=s)})(window,document);